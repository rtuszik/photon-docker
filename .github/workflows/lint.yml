name: Lint-Format-Check
on:
    pull_request:
    workflow_dispatch:

permissions: {}

jobs:
    lint:
        runs-on: ubuntu-latest

        permissions:
            contents: read
            packages: read
            statuses: write

        steps:
            - name: Checkout Code
              uses: actions/checkout@v4
              with:
                  fetch-depth: 0

            - name: "Set up Python"
              uses: actions/setup-python@v5
              with:
                  python-version-file: ".python-version"

            - name: Install uv
              uses: astral-sh/setup-uv@v6

            - name: install project
              run: uv sync --locked
            - name:
              run: uv add ruff ty

            - name: ruff Check
              run: uv run ruff check --fix --output-format=github

            - name: ruff format
              run: uv run ruff format

            - name: ty check
              run: uv run ty check
